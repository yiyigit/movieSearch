{"ast":null,"code":"import _slicedToArray from\"/Users/yiyizhou/Desktop/NEU/info6250 Web tool/demo/final-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Login from\"./Login\";import Logout from\"./Logout\";import Search from\"./Search\";import HomepageBtn from\"./HomepageBtn\";import errors from\"./errors\";import{ErrorContext,MovieContext}from\"./context\";import{fetchLoginStatus}from\"./service\";import\"./App.css\";function App(){var _useState=useState({isLoggedIn:false}),_useState2=_slicedToArray(_useState,2),userState=_useState2[0],setUserState=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),movieState=_useState4[0],setMovieState=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];useEffect(function(){fetchLoginStatus().then(function(json){setUserState({isLoggedIn:true,username:json.username});}).catch(function(err){setError(errors[err.error||err||\"DEFAULT\"]);});},[userState.username]);var login=function login(username){setUserState({isLoggedIn:true,username:username});};var logout=function logout(){setUserState({isLoggedIn:false});};var content;if(!userState.isLoggedIn){content=/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Login,{onLogin:login}));}else{content=/*#__PURE__*/React.createElement(MovieContext.Provider,{value:[movieState,setMovieState]},/*#__PURE__*/React.createElement(\"div\",{className:\"header\"},/*#__PURE__*/React.createElement(HomepageBtn,null),/*#__PURE__*/React.createElement(Logout,{onLogout:logout})),/*#__PURE__*/React.createElement(Search,null));}return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Your Movie Database\"),/*#__PURE__*/React.createElement(\"p\",{className:\"error\"},error),/*#__PURE__*/React.createElement(ErrorContext.Provider,{value:[setError]},content));}export default App;","map":{"version":3,"sources":["/Users/yiyizhou/Desktop/NEU/info6250 Web tool/demo/final-project/src/App.jsx"],"names":["React","useState","useEffect","Login","Logout","Search","HomepageBtn","errors","ErrorContext","MovieContext","fetchLoginStatus","App","isLoggedIn","userState","setUserState","movieState","setMovieState","error","setError","then","json","username","catch","err","login","logout","content"],"mappings":"uLAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,OAASC,YAAT,CAAuBC,YAAvB,KAA2C,WAA3C,CACA,OAASC,gBAAT,KAAiC,WAAjC,CAEA,MAAO,WAAP,CAEA,QAASC,CAAAA,GAAT,EAAe,eACqBV,QAAQ,CAAC,CAAEW,UAAU,CAAE,KAAd,CAAD,CAD7B,wCACNC,SADM,eACKC,YADL,8BAEuBb,QAAQ,CAAC,EAAD,CAF/B,yCAENc,UAFM,eAEMC,aAFN,8BAGaf,QAAQ,EAHrB,yCAGNgB,KAHM,eAGCC,QAHD,eAKbhB,SAAS,CAAC,UAAM,CACdQ,gBAAgB,GACbS,IADH,CACQ,SAACC,IAAD,CAAU,CACdN,YAAY,CAAC,CACXF,UAAU,CAAE,IADD,CAEXS,QAAQ,CAAED,IAAI,CAACC,QAFJ,CAAD,CAAZ,CAID,CANH,EAOGC,KAPH,CAOS,SAACC,GAAD,CAAS,CACdL,QAAQ,CAACX,MAAM,CAACgB,GAAG,CAACN,KAAJ,EAAaM,GAAb,EAAoB,SAArB,CAAP,CAAR,CACD,CATH,EAUD,CAXQ,CAWN,CAACV,SAAS,CAACQ,QAAX,CAXM,CAAT,CAaA,GAAMG,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACH,QAAD,CAAc,CAC1BP,YAAY,CAAC,CACXF,UAAU,CAAE,IADD,CAEXS,QAAQ,CAARA,QAFW,CAAD,CAAZ,CAID,CALD,CAOA,GAAMI,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACnBX,YAAY,CAAC,CACXF,UAAU,CAAE,KADD,CAAD,CAAZ,CAGD,CAJD,CAMA,GAAIc,CAAAA,OAAJ,CACA,GAAI,CAACb,SAAS,CAACD,UAAf,CAA2B,CACzBc,OAAO,cACL,4CACE,oBAAC,KAAD,EAAO,OAAO,CAAEF,KAAhB,EADF,CADF,CAKD,CAND,IAMO,CACLE,OAAO,cACL,oBAAC,YAAD,CAAc,QAAd,EAAuB,KAAK,CAAE,CAACX,UAAD,CAAaC,aAAb,CAA9B,eACE,2BAAK,SAAS,CAAC,QAAf,eACE,oBAAC,WAAD,MADF,cAEE,oBAAC,MAAD,EAAQ,QAAQ,CAAES,MAAlB,EAFF,CADF,cAKE,oBAAC,MAAD,MALF,CADF,CASD,CAED,mBACE,2BAAK,SAAS,CAAC,KAAf,eACE,oDADF,cAEE,yBAAG,SAAS,CAAC,OAAb,EAAsBR,KAAtB,CAFF,cAGE,oBAAC,YAAD,CAAc,QAAd,EAAuB,KAAK,CAAE,CAACC,QAAD,CAA9B,EACGQ,OADH,CAHF,CADF,CASD,CAED,cAAef,CAAAA,GAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Login from \"./Login\";\nimport Logout from \"./Logout\";\nimport Search from \"./Search\";\nimport HomepageBtn from \"./HomepageBtn\";\nimport errors from \"./errors\";\nimport { ErrorContext, MovieContext } from \"./context\";\nimport { fetchLoginStatus } from \"./service\";\n\nimport \"./App.css\";\n\nfunction App() {\n  const [userState, setUserState] = useState({ isLoggedIn: false });\n  const [movieState, setMovieState] = useState({});\n  const [error, setError] = useState();\n\n  useEffect(() => {\n    fetchLoginStatus()\n      .then((json) => {\n        setUserState({\n          isLoggedIn: true,\n          username: json.username,\n        });\n      })\n      .catch((err) => {\n        setError(errors[err.error || err || \"DEFAULT\"]);\n      });\n  }, [userState.username]);\n\n  const login = (username) => {\n    setUserState({\n      isLoggedIn: true,\n      username,\n    });\n  };\n\n  const logout = () => {\n    setUserState({\n      isLoggedIn: false,\n    });\n  };\n\n  let content;\n  if (!userState.isLoggedIn) {\n    content = (\n      <div>\n        <Login onLogin={login} />\n      </div>\n    );\n  } else {\n    content = (\n      <MovieContext.Provider value={[movieState, setMovieState]}>\n        <div className=\"header\">\n          <HomepageBtn />\n          <Logout onLogout={logout} />\n        </div>\n        <Search />\n      </MovieContext.Provider>\n    );\n  }\n\n  return (\n    <div className=\"App\">\n      <h1>Your Movie Database</h1>\n      <p className=\"error\">{error}</p>\n      <ErrorContext.Provider value={[setError]}>\n        {content}\n      </ErrorContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}