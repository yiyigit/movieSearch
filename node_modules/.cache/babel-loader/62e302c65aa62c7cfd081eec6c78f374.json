{"ast":null,"code":"var _jsxFileName = \"/Users/yiyizhou/Desktop/NEU/info6250 Web tool/demo/final-project/src/Result.jsx\";\nimport React, { useContext, useEffect } from \"react\";\nimport { MovieContext, ErrorContext } from \"./context\";\nimport errors from \"./errors\";\nimport Recommendation from \"./Recommendation\";\nimport { fetchDetail, convertImdbIdtoId } from \"./service\";\n\nconst Result = () => {\n  const [movieState, setMovieState] = useContext(MovieContext);\n  const [error, setError] = useContext(ErrorContext);\n  useEffect(() => {\n    if (movieState.id) {\n      const imgURL = \"https://image.tmdb.org/t/p/w500/\";\n      getDetail(movieState.id);\n      setError(\"\");\n    }\n\n    if (!movieState.id) {\n      convertImdbIdtoId(movieState.imdbID).then(json => {\n        if (json.movie_results.length === 0) {\n          throw new Error(\"LACK_KEYWORD\");\n        }\n\n        const id = json.movie_results[0].id;\n        getDetail(id);\n        setError(\"\");\n      }).catch(err => {\n        setError(errors[err.message || err || \"DEFAULT\"]);\n      });\n    }\n  }, [movieState.id]);\n\n  const getDetail = id => {\n    const imgURL = \"https://image.tmdb.org/t/p/w500/\";\n    return fetchDetail(id).then(json => {\n      setMovieState({\n        Title: json.title,\n        Year: json.release_date,\n        imdbID: json.imdb_id,\n        id: json.id,\n        overview: json.overview,\n        PosterUrl: imgURL + json.poster_path\n      });\n      setError(\"\");\n    }).catch(err => {\n      setError(errors[err.message || \"DEFAULT\"]);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"result-detail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-detail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, \" Title: \", movieState.Title, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"time\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, \" Year: \", movieState.Year, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"overview\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, \" Overview: \", movieState.overview), /*#__PURE__*/React.createElement(\"label\", {\n    for: \"comment\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, \"Comments:\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    id: \"comment\",\n    rows: \"4\",\n    cols: \"20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"img-detail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: movieState.PosterUrl,\n    alt: \"poster\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(Recommendation, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default Result;","map":{"version":3,"sources":["/Users/yiyizhou/Desktop/NEU/info6250 Web tool/demo/final-project/src/Result.jsx"],"names":["React","useContext","useEffect","MovieContext","ErrorContext","errors","Recommendation","fetchDetail","convertImdbIdtoId","Result","movieState","setMovieState","error","setError","id","imgURL","getDetail","imdbID","then","json","movie_results","length","Error","catch","err","message","Title","title","Year","release_date","imdb_id","overview","PosterUrl","poster_path"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect } from \"react\";\nimport { MovieContext, ErrorContext } from \"./context\";\nimport errors from \"./errors\";\nimport Recommendation from \"./Recommendation\";\nimport { fetchDetail, convertImdbIdtoId } from \"./service\";\n\nconst Result = () => {\n  const [movieState, setMovieState] = useContext(MovieContext);\n  const [error, setError] = useContext(ErrorContext);\n\n  useEffect(() => {\n    if (movieState.id) {\n      const imgURL = \"https://image.tmdb.org/t/p/w500/\";\n      getDetail(movieState.id);\n      setError(\"\");\n    }\n    if (!movieState.id) {\n      convertImdbIdtoId(movieState.imdbID)\n        .then((json) => {\n          if (json.movie_results.length === 0) {\n            throw new Error(\"LACK_KEYWORD\");\n          }\n          const id = json.movie_results[0].id;\n          getDetail(id);\n          setError(\"\");\n        })\n        .catch((err) => {\n          setError(errors[err.message || err || \"DEFAULT\"]);\n        });\n    }\n  }, [movieState.id]);\n\n  const getDetail = (id) => {\n    const imgURL = \"https://image.tmdb.org/t/p/w500/\";\n    return fetchDetail(id)\n      .then((json) => {\n        setMovieState({\n          Title: json.title,\n          Year: json.release_date,\n          imdbID: json.imdb_id,\n          id: json.id,\n          overview: json.overview,\n          PosterUrl: imgURL + json.poster_path,\n        });\n        setError(\"\");\n      })\n      .catch((err) => {\n        setError(errors[err.message || \"DEFAULT\"]);\n      });\n  };\n  return (\n    <div>\n      <div className=\"result-detail\">\n        <div className=\"text-detail\" />\n        <p> Title: {movieState.Title} </p>\n        <p className=\"time\"> Year: {movieState.Year} </p>\n        <p className=\"overview\"> Overview: {movieState.overview}</p>\n        <label for=\"comment\">Comments:</label>\n        <textarea id=\"comment\" rows=\"4\" cols=\"20\"></textarea>\n        <div className=\"img-detail\">\n          <img src={movieState.PosterUrl} alt=\"poster\" />\n        </div>\n      </div>\n      <Recommendation />\n    </div>\n  );\n};\n\nexport default Result;\n"]},"metadata":{},"sourceType":"module"}