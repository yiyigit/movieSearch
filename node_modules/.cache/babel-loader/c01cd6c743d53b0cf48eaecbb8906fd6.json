{"ast":null,"code":"var _jsxFileName = \"/Users/yiyizhou/Desktop/NEU/info6250 Web tool/demo/final-project/src/Result.jsx\";\nimport React, { useContext, useState, useEffect } from \"react\";\nimport { MovieContext, ErrorContext } from \"./context\";\nimport errors from \"./errors\";\nimport Recommendation from \"./Recommendation\";\nimport { fetchDetail, convertImdbIdtoId } from \"./service\";\nimport unavailablePic from \"./unavailable.jpg\";\n\nconst Result = () => {\n  const [movieState, setMovieState] = useContext(MovieContext);\n  const [error, setError] = useContext(ErrorContext);\n  const [comment, setComment] = useState(\"\");\n  useEffect(() => {\n    if (movieState.id) {\n      getDetail(movieState.id);\n      setError(\"\");\n    }\n\n    if (!movieState.id) {\n      convertImdbIdtoId(movieState.imdbID).then(json => {\n        if (json.movie_results.length === 0) {\n          throw new Error(\"LACK_KEYWORD\");\n        }\n\n        const id = json.movie_results[0].id;\n        getDetail(id);\n        setError(\"\");\n      }).catch(err => {\n        setError(errors[err.message || err || \"DEFAULT\"]);\n      });\n    }\n  }, [movieState.id]);\n\n  const getDetail = id => {\n    const imgURL = \"https://image.tmdb.org/t/p/w500/\";\n    return fetchDetail(id).then(json => {\n      setMovieState({\n        Title: json.title,\n        Year: json.release_date,\n        imdbID: json.imdb_id,\n        id: json.id,\n        overview: json.overview\n      });\n\n      if (!json.poster_path) {\n        setMovieState({ ...movieState,\n          PosterUrl: unavailablePic\n        });\n      } else {\n        setMovieState({ ...movieState,\n          PosterUrl: imgURL + json.poster_path\n        });\n      }\n\n      setError(\"\");\n    }).catch(err => {\n      setError(errors[err.message || err || \"DEFAULT\"]);\n    });\n  };\n\n  const handleInput = e => {\n    setComment(e.target.value);\n  };\n\n  const sendCommentToServer = () => {\n    console.log(comment);\n  };\n\n  let result_poster;\n  {\n    if (!movieState.PosterUrl) {\n      result_poster = /*#__PURE__*/React.createElement(\"img\", {\n        src: unavailablePic,\n        alt: \"poster unavailable\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 24\n        }\n      });\n    } else {\n      result_poster = /*#__PURE__*/React.createElement(\"img\", {\n        src: movieState.PosterUrl,\n        alt: \"poster\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 20\n        }\n      });\n    }\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"result-detail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  }, \" Title: \", movieState.Title, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"time\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }, \" Year: \", movieState.Year, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"overview\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, \" Overview: \", movieState.overview), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, \"My Comment:\", /*#__PURE__*/React.createElement(\"textarea\", {\n    id: \"comment\",\n    rows: \"4\",\n    cols: \"50\",\n    value: comment,\n    onChange: e => handleInput(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: sendCommentToServer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }, \"add/update\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"img-detail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, result_poster)), /*#__PURE__*/React.createElement(Recommendation, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default Result;","map":{"version":3,"sources":["/Users/yiyizhou/Desktop/NEU/info6250 Web tool/demo/final-project/src/Result.jsx"],"names":["React","useContext","useState","useEffect","MovieContext","ErrorContext","errors","Recommendation","fetchDetail","convertImdbIdtoId","unavailablePic","Result","movieState","setMovieState","error","setError","comment","setComment","id","getDetail","imdbID","then","json","movie_results","length","Error","catch","err","message","imgURL","Title","title","Year","release_date","imdb_id","overview","poster_path","PosterUrl","handleInput","e","target","value","sendCommentToServer","console","log","result_poster"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\nimport { MovieContext, ErrorContext } from \"./context\";\nimport errors from \"./errors\";\nimport Recommendation from \"./Recommendation\";\nimport { fetchDetail, convertImdbIdtoId } from \"./service\";\nimport unavailablePic from \"./unavailable.jpg\";\n\nconst Result = () => {\n  const [movieState, setMovieState] = useContext(MovieContext);\n  const [error, setError] = useContext(ErrorContext);\n  const [comment, setComment] = useState(\"\");\n\n  useEffect(() => {\n    if (movieState.id) {\n      getDetail(movieState.id);\n      setError(\"\");\n    }\n    if (!movieState.id) {\n      convertImdbIdtoId(movieState.imdbID)\n\t\t\t\t.then((json) => {\n          if (json.movie_results.length === 0) {\n            throw new Error(\"LACK_KEYWORD\");\n          }\n          const id = json.movie_results[0].id;\n          getDetail(id);\n          setError(\"\");\n        })\n        .catch((err) => {\n          setError(errors[err.message || err || \"DEFAULT\"]);\n        });\n    }\n  }, [movieState.id]);\n\n  const getDetail = (id) => {\n    const imgURL = \"https://image.tmdb.org/t/p/w500/\";\n    return fetchDetail(id)\n\t\t\t.then((json) => {\n\t\t\t\tsetMovieState({\n          Title: json.title,\n          Year: json.release_date,\n          imdbID: json.imdb_id,\n          id: json.id,\n          overview: json.overview,\n        });\n\t\t\t\tif (!json.poster_path) {\n\t\t\t\t\tsetMovieState({ ...movieState, PosterUrl: unavailablePic });\n\t\t\t\t} else {\n\t\t\t\t\tsetMovieState({\n            ...movieState,\n            PosterUrl: imgURL + json.poster_path,\n          });\n\t\t\t\t}\n        setError(\"\");\n      })\n      .catch((err) => {\n          setError(errors[err.message || err || \"DEFAULT\"]);\n\n      });\n  };\n  const handleInput = (e) => {\n    setComment(e.target.value);\n  };\n\tconst sendCommentToServer = () => {\n\t\tconsole.log(comment);\n\t};\n\tlet result_poster;\n\t{\n    if (!movieState.PosterUrl) {\n      result_poster =  <img src={unavailablePic} alt=\"poster unavailable\" />;\n\t\t} else {\n\t\t\tresult_poster = <img src={movieState.PosterUrl} alt=\"poster\" />;\n\t\t}\n  }\n  return (\n    <div className=\"container\">\n      <div className=\"flex-box\">\n        <div className=\"result-detail\">\n          <p> Title: {movieState.Title} </p>\n          <p className=\"time\"> Year: {movieState.Year} </p>\n          <p className=\"overview\"> Overview: {movieState.overview}</p>\n          <label>\n            My Comment:\n            <textarea\n              id=\"comment\"\n              rows=\"4\"\n              cols=\"50\"\n              value={comment}\n              onChange={(e) => handleInput(e)}\n            ></textarea>\n          </label>\n          <button onClick={sendCommentToServer}>add/update</button>\n        </div>\n        <div className=\"img-detail\">{result_poster}</div>\n      </div>\n\n      <Recommendation />\n    </div>\n  );\n};\n\nexport default Result;\n"]},"metadata":{},"sourceType":"module"}